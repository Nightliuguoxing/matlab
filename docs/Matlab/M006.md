# M006 - 灰色关联分析 & 灰色预测模型

### 灰色预测的概念

灰色系统的应用范畴大致分为以下几方面：
- 灰色关联分析
- 灰色预测：人口预测；灾变预测；
- 灰色决策
- 灰色预测控制

###### 灰色系统、 白色系统和黑色系统
- 白色系统是指一个系统的内部特征是完全已知的，即系统的信息是完全充分的。
- 黑色系统是指一个系统的内部信息对外界来说是一无所知的，只能通过它与外界的联系来加以观测研究。
- 灰色系统内的一部分信息是已知的， 另一部分信息是未知的，系统内各因素间有不确定的关系。

###### 灰色预测法
- 灰色预测法是一种对含有不确定因素的系统进行预测的方法。
- 灰色预测是对既含有已知信息又含有不确定信息的系统进行预则，就是对在一定范围内变化的、与时间有关的灰色过程进行预测。

> 灰色预测通过鉴别系统因素之间发展趋势的相异程度，即进行关联分析，并可对原始数据进行生成处理来寻找系统变动的规律，生成有较强规律性的数据序列,然后建立相应的微分方程模型，从而预测事物未来发展趋势的状况。

> 灰色预测法用等时距观测到的反映预测对象特征的一系列数量值构造灰色预测模型，预测未来某一时刻的特征量，或达到某一 特征量的时间。

###### 灰色预测的四种常见类型
- 灰色时间序列预测: 即用观察到的反映预测对象特征的时间序列来构造灰色预测模型，预测未来某一时刻的特征量，或达到某一特征量的时间。
- 畸变预测: 即通过灰色模型预测异常值出现的时刻，预测异常值什么时候出现在特定时区内。
- 系统预测: 通过对系统行为特征指标建立一组相互关联的灰色预测模型，预测系统中众多变量间的相互协调关系的变化。
- 拓扑预测: 将原始数据做曲线，在曲线上按定值寻找该定值发生的所有时点，并以该定值为框架构成时点数列，然后建立模型预测该定值所发生的时点。

### 灰色生成数列
灰色系统理论认为，尽管客观表象复杂，但总是有整体功能的，因此必然蕴含某种内在规律。关键在于如何选择适当的方式去挖掘和利用它。灰色系统是通过对原始数据的整理来寻求其变化规律的，这是一种就数据寻求数据的现实规律的途径，即为灰色序列的生成。一切灰色序列都能通过某种生成弱化其随机性，显现其规律性。数据生成的常用方式有`累加生成`、`累减生成`和`加权累加生成`。

### 灰色关联度分析

### 灰色模型GM

灰色系统理论是基于关联空间、光滑离散函数等概念定义灰导数与灰微分方程，进而用离散数据列建立微分方程形式的动态模型，即灰色模型是利用离散随机数经过生成变为随机性被显著削弱而且较有规律的生成数，建立起的微分方程形式的模型，这样便于对其变化过程进行研究和描述。  
G表示grey（ 灰色） ， M表示model（ 模型）

### 灰色预测实例

```matlab
clc,clear
han1=[83.0 79.8 78.1 85.1 86.6 88.2 90.3 86.7 93.3 92.5 90.9 96.9
101.7 85.1 87.8 91.6 93.4 94.5 97.4 99.5 104.2 102.3 101.0 123.5
92.2 114.0 93.3 101.0 103.5 105.2 109.5 109.2 109.6 111.2 121.7 131.3
105.0 125.7 106.6 116.0 117.6 118.0 121.7 118.7 120.2 127.8 121.8 121.9
139.3 129.5 122.5 124.5 135.7 130.8 138.7 133.7 136.8 138.9 129.6 133.7
137.5 135.3 133.0 133.4 142.8 141.6 142.9 147.3 159.6 162.1 153.5 155.9
163.2 159.7 158.4 145.2 124.0 144.1 157.0 162.6 171.8 180.7 173.5 176.5];
han1(end,:)=[]; %相当于han1=han1(1:6,:);
m=size(han1,2); %把月份提取出来， 12个月
x0=mean(han1,2); %返回x矩阵每行的平均值， 其中的2代表返回行
x1=cumsum(x0); %一次累加
alpha=0.4;
n=length(x0); %长度， 数据的维度， n=6
z1=alpha*x1(2:n)+(1-alpha)*x1(1:n-1) %求邻域生成数
Y=x0(2:n);B=[-z1,ones(n-1,1)];
ab=B\Y %求出a,b == inv(B)*Y inv(B) -> B的逆
k=6;
x7hat=(x0(1)-ab(2)/ab(1))*(exp(-ab(1)*k)-exp(-ab(1)*(k-1))) %预测结果
z=m*x7hat
u=sum(han1)/sum(sum(han1))
v=z*u
```

结果：
```
x1 = [87.6167 186.1167 294.5917 413.0083 545.8167 691.2250]
z1 = [ 127.0167 229.5067 341.9583 466.1317 603.9800]
ab = [ -0.0993 85.5985]
x7hat = 162.8793 z = 1.9546e+003
u = [ 0.0794 0.0807 0.0749 0.0786 0.0819 0.0818 0.0845 0.0838 0.0872 0.0886 0.0866 0.0920]
v =[155.2152 157.7365 146.4023 153.5421 160.1400 159.8337 165.0649 163.7924 170.5317 173.1473 169.3064 179.8394]
```